@tailwind base;
@tailwind components;
@tailwind utilities;

.glow-white {
  box-shadow: .05em .05em 5px #fff, .05em .05em 10px #fff, .05em .05em 15px #fff, .05em .05em 20px #ffffff;
}

.text-hard-shadow-white {
  text-shadow: .05em .05em 1px #fff;
  /* X-offset, Y-offset, Blur-radius, Color */
}

@layer base {

  /* CSS variables for HSL values with enhanced semantic colors */
  :root {
    /* Base colors */
    --background: 0 0% 100%;
    --foreground: 0 0% 3%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3%;
    --primary: 41 100% 50%;
    /* Sunset yellow */
    --primary-foreground: 0 0% 98%;
    /* For #040404 */
    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;
    --accent: 32 100% 50%;
    /* orange */
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 90%;
    --input: 0 0% 90%;
    --ring: 0 0% 3%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
    --heading-color: 217 3% 50%;
    /* Global heading color - dark blue-gray, slate-800 */

    /* Semantic surface colors */
    --surface-primary: 0 0% 100%;
    --surface-secondary: 0 0% 98%;
    --surface-tertiary: 0 0% 96%;

    /* Panel colors */
    --panel-background: 0 0% 100%;
    --panel-border: 0 0% 90%;

    /* Interactive states */
    --hover-overlay: 0 0% 0% / 0.05;
    --focus-ring: 0 0% 3%;
    --active-state: 41 100% 45%;

    /* Navigation colors */
    --nav-background: 0 0% 100%;
    --nav-foreground: 0 0% 15%;
    --nav-hover: 0 0% 96%;
    --nav-border: 0 0% 89.8%;

    /* Text colors */
    --text-primary: 0 0% 3%;
    --text-secondary: 0 0% 20%;
    --text-muted: 0 0% 40%;
    --text-inverted: 0 0% 98%;

    /* Form colors */
    --form-input-bg: 0 0% 100%;
    --form-input-border: 0 0% 90%;
    --form-input-text: 0 0% 3%;
    --form-label: 0 0% 3%;
    --form-placeholder: 0 0% 45%;
    --form-focus-ring: 41 100% 50% / 0.3;
    --form-error: 0 84.2% 60%;
    --form-success: 142 71% 45%;

    /* Content colors */
    --content-heading: 217 30% 10%;
    --content-text: 0 0% 3%;
    --content-link: 41 100% 50%;
    --content-link-hover: 41 100% 45%;
    --content-code: 0 0% 3%;
    --content-code-bg: 0 0% 96%;
    --content-quote: 0 0% 45%;
    --content-quote-border: 41 100% 50% / 0.3;

    /* Overlay colors */
    --overlay-bg: 0 0% 0% / 0.5;
    --overlay-text: 0 0% 98%;

    /* Hero module colors */
    --hero-overlay: 0 0% 0% / 0.3;
    --hero-text: 0 0% 98%;
    --hero-text-shadow: 0 0% 0% / 0.5;
  }

  .dark {
    /* Base colors */
    --background: 0 0% 3%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3%;
    --popover-foreground: 0 0% 98%;
    --primary: 41 100% 50%;
    /* Keep yellow color in dark mode */
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 15%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 63% 31%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 15%;
    --input: 0 0% 15%;
    --ring: 0 0% 83.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
    --heading-color: 0 0% 90%;

    /* Semantic surface colors */
    --surface-primary: 0 0% 3%;
    --surface-secondary: 0 0% 7%;
    --surface-tertiary: 0 0% 10%;

    /* Panel colors */
    --panel-background: 0 0% 7%;
    --panel-border: 0 0% 15%;

    /* Interactive states */
    --hover-overlay: 0 0% 100% / 0.05;
    --focus-ring: 0 0% 83%;
    --active-state: 41 100% 45%;

    /* Navigation colors */
    --nav-background: 0 0% 3%;
    --nav-foreground: 0 0% 98%;
    --nav-hover: 0 0% 7%;
    --nav-border: 0 0% 15%;

    /* Text colors */
    --text-primary: 0 0% 85%;
    --text-secondary: 0 0% 70%;
    --text-muted: 0 0% 50%;
    --text-inverted: 0 0% 98%;

    /* Form colors */
    --form-input-bg: 0 0% 7%;
    --form-input-border: 0 0% 15%;
    --form-input-text: 0 0% 98%;
    --form-label: 0 0% 98%;
    --form-placeholder: 0 0% 63%;
    --form-focus-ring: 41 100% 50% / 0.3;
    --form-error: 0 62.8% 70%;
    --form-success: 142 71% 45%;

    /* Content colors */
    --content-heading: 210 15% 85%;
    --content-text: 0 0% 85%;
    --content-link: 41 100% 50%;
    --content-link-hover: 41 100% 60%;
    --content-code: 0 0% 98%;
    --content-code-bg: 0 0% 10%;
    --content-quote: 0 0% 70%;
    --content-quote-border: 41 100% 50% / 0.3;

    /* Overlay colors */
    --overlay-bg: 0 0% 0% / 0.7;
    --overlay-text: 0 0% 98%;

    /* Hero module colors */
    --hero-overlay: 0 0% 0% / 0.5;
    --hero-text: 0 0% 98%;
    --hero-text-shadow: 0 0% 0% / 0.7;
  }

  * {
    @apply border-border;
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
    @apply font-sans;
  }

  html {
    scrollbar-gutter: stable;
  }

  main.container {
    @apply text-xl;
  }

  h1 {
    @apply font-heading text-[hsl(var(--text-primary))];
  }

  h2 {
    @apply font-heading text-[hsl(var(--heading-color))];
  }

  h3,
  h4,
  h5,
  h6 {
    @apply font-heading text-[hsl(var(--heading-color))];
  }

  /* Post title styling - single source of truth for blog post titles */
  /* Blog listing titles should match the h2 size in single posts */
  .post-title,
  .prose h2,
  .prose-lg h2 {
    @apply text-xl font-heading text-[hsl(var(--heading-color))];
  }
}

/* end base layer */

@layer components {

  /* Semantic surface utilities */
  .surface-primary {
    background-color: hsl(var(--surface-primary));
  }

  .surface-secondary {
    background-color: hsl(var(--surface-secondary));
  }

  .surface-tertiary {
    background-color: hsl(var(--surface-tertiary));
  }

  /* Panel utilities */
  .panel-bg {
    background-color: hsl(var(--panel-background));
  }

  .panel-border {
    border-color: hsl(var(--panel-border));
  }

  /* Navigation utilities */
  .nav-bg {
    background-color: hsl(var(--nav-background));
  }

  .nav-text {
    color: hsl(var(--nav-foreground));
  }

  .nav-hover {
    background-color: hsl(var(--nav-hover));
  }

  /* Text color utilities */
  .text-primary-color {
    color: hsl(var(--text-primary));
  }

  .text-secondary-color {
    color: hsl(var(--text-secondary));
  }

  .text-muted-color {
    color: hsl(var(--text-muted));
  }

  .text-inverted-color {
    color: hsl(var(--text-inverted));
  }

  /* Form utilities */
  .form-input {
    background-color: hsl(var(--form-input-bg));
    border-color: hsl(var(--form-input-border));
    color: hsl(var(--form-input-text));
  }

  .form-input::placeholder {
    color: hsl(var(--form-placeholder));
  }

  .form-input:focus {
    box-shadow: 0 0 0 2px hsl(var(--form-focus-ring));
    border-color: hsl(var(--primary));
  }

  .form-label {
    color: hsl(var(--form-label));
  }

  /* Content utilities */
  .content-heading {
    color: hsl(var(--content-heading));
  }

  .content-text {
    color: hsl(var(--content-text));
  }

  .content-link {
    color: hsl(var(--content-link));
  }

  .content-link:hover {
    color: hsl(var(--content-link-hover));
  }

  .content-code {
    color: hsl(var(--content-code));
    background-color: hsl(var(--content-code-bg));
  }

  .content-quote {
    color: hsl(var(--content-quote));
    border-left-color: hsl(var(--content-quote-border));
  }

  /* Hero module utilities */
  .hero-overlay {
    background-color: hsl(var(--hero-overlay));
  }

  .hero-text {
    color: hsl(var(--hero-text));
    text-shadow: 0 2px 4px hsl(var(--hero-text-shadow));
  }

  /* Updated component styles using semantic colors */
  article {
    @apply surface-primary;
  }


  /* Form validation styling */
  .form-error {
    @apply text-red-500 dark:text-red-400;
  }

  .form-required::after {
    content: "*";
    @apply ml-0.5 text-red-500 dark:text-red-400;
  }

  /* Info badges */
  .badge-teacher {
    @apply bg-amber-100 text-amber-600;
  }

  .badge-student {
    @apply bg-red-100 text-red-500;
  }

  .badge-class {
    @apply bg-teal-100 text-teal-600;
  }

  /* Dark mode badge variants */
  .dark .badge-teacher {
    background-color: rgba(255, 176, 0, 0.1);
    color: rgb(255, 176, 0);
  }

  .dark .badge-student {
    background-color: rgba(225, 85, 84, 0.1);
    color: rgb(225, 85, 84);
  }

  .dark .badge-class {
    background-color: rgba(14, 188, 107, 0.1);
    color: rgb(20, 184, 72);
  }

  /* Panels and cards using semantic colors */
  .card,
  .panel {
    @apply panel-bg panel-border border text-foreground;
  }

  /* Dark mode prose styling */
  .prose-dark {
    @apply prose-headings:text-foreground prose-p:text-foreground prose-a:text-primary prose-strong:text-foreground prose-ul:text-foreground prose-ol:text-foreground prose-blockquote:text-foreground/80 prose-figure:text-foreground prose-figcaption:text-foreground/80 prose-code:text-foreground prose-pre:bg-surface-tertiary prose-pre:text-foreground prose-hr:border-border prose-th:text-foreground prose-td:text-foreground;
  }

  /* Text module dark mode content styling */
  .text-module-content-dark {
    @apply text-foreground;
  }

  .text-module-content-dark a {
    @apply text-primary hover:text-primary/80;
  }

  .text-module-content-dark blockquote {
    @apply border-l-4 border-primary/30 pl-4 italic text-foreground/80;
  }

  /* Custom radio styling that can't go in Tailwind config */
  .custom-radio:checked {
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
  }

  /* Element styling better kept in CSS than as utilities */
  .current_page_item {
    @apply text-red-500 hover:text-blue-500;
  }

  .plugin-btn {
    @apply bg-blue-500 text-white font-bold py-2 px-4 rounded;
  }

  /* Menu stuff */
  .group-hover-visible {
    z-index: 50;
  }

  .nav-item {
    @apply relative;
  }

  .nav-dropdown:hover .nav-dropdown-list {
    @apply lg:block;
  }
}

@layer utilities {

  /* Module background color override for dark mode */
  .module-bg {
    background-color: var(--module-bg-color, transparent);
  }
  
  .dark .module-bg {
    background-color: var(--module-dark-bg-color, hsl(var(--surface-secondary))) !important;
  }

  /* Text shadow utilities */
  .text-shadow {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .text-shadow-md {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.12), 0 2px 4px rgba(0, 0, 0, 0.08);
  }

  .text-shadow-lg {
    text-shadow: 0 15px 30px rgba(0, 0, 0, 0.11), 0 5px 15px rgba(0, 0, 0, 0.08);
  }

  .text-shadow-xl {
    text-shadow: 0 20px 40px rgba(0, 0, 0, 0.11), 0 5px 15px rgba(0, 0, 0, 0.08);
  }

  .text-shadow-white {
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
  }

  /* Dark mode specific utilities for hero modules */
  .dark-hero-module {
    @apply relative;
  }

  .dark-hero-module::after {
    content: '';
    @apply absolute inset-0 bg-black/10 z-[1] pointer-events-none;
  }

  .dark .dark-hero-module::after {
    @apply bg-black/30;
  }

  .dark-hero-content {
    @apply relative z-20;
  }

  .dark-hero-button {
    @apply shadow-lg;
  }

  /* Dark mode specific utilities for CTA modules */
  .cta-module-dark {
    @apply relative;
  }

  .cta-module-dark img {
    @apply transition-opacity brightness-[0.85] opacity-80;
  }

  .dark-cta-button {
    @apply shadow-lg focus:ring-2 focus:ring-offset-2 focus:ring-offset-background focus:ring-primary/70;
  }

  /* Interactive state utilities */
  .hover-state {
    @apply transition-colors duration-200;
  }

  .hover-state:hover {
    background-color: hsl(var(--hover-overlay));
  }

  .active-state:active {
    background-color: hsl(var(--active-state));
  }

  .focus-visible-state:focus-visible {
    outline: 2px solid hsl(var(--focus-ring));
    outline-offset: 2px;
  }

  /* Enhanced focus states for dark mode */
  .dark .focus-visible-state:focus-visible {
    outline: 2px solid hsl(var(--focus-ring));
    outline-offset: 2px;
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.3);
  }

  /* Interactive element states for dark mode */
  .dark a:hover,
  .dark button:hover:not([disabled]) {
    color: hsl(var(--primary));
  }

  .dark a:focus-visible,
  .dark button:focus-visible:not([disabled]) {
    outline: 2px solid hsl(var(--focus-ring));
    outline-offset: 2px;
  }

  /* Dark mode specific text utilities */
  .dark-mode-text {
    @apply text-foreground transition-colors duration-200;
  }

  /* Dark mode specific border utilities */
  .dark-mode-border {
    @apply border-border transition-colors duration-200;
  }

  /* Consistent border utilities for dark mode */
  .dark .border {
    @apply border-panel-border;
  }

  .dark .divide-y> :not([hidden])~ :not([hidden]),
  .dark .divide-x> :not([hidden])~ :not([hidden]) {
    @apply divide-panel-border;
  }

  /* Dark mode specific background utilities */
  .dark-mode-bg {
    @apply bg-background transition-colors duration-200;
  }

  /* Dark mode specific card utilities */
  .dark-mode-card {
    @apply bg-card text-card-foreground border-border transition-colors duration-200;
  }

  /* Shadow utilities for dark mode */
  .dark .shadow-sm {
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  }

  .dark .shadow-md {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
  }

  .dark .shadow-lg {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
  }

  .dark .shadow-xl {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
  }

  .dark .shadow-dark-sm {
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.4);
  }

  .dark .shadow-dark-md {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
  }

  /* Accessibility utilities */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Content contrast utilities */
  .high-contrast-text {
    @apply text-foreground font-medium;
  }

  .dark .high-contrast-text {
    @apply text-foreground font-semibold;
  }
}